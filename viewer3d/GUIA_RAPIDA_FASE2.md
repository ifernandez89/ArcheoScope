# ðŸš€ GuÃ­a RÃ¡pida - FASE 2: Motor de Experiencias

## ðŸŽ¬ NavegaciÃ³n de Escenas

### BotÃ³n Flotante
- **UbicaciÃ³n**: Esquina inferior izquierda
- **Icono**: ðŸŽ¬ (pÃºrpura)
- **AcciÃ³n**: Click para abrir/cerrar panel

### Panel de NavegaciÃ³n
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ðŸŽ¬ Navegador de Escenas         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ESCENA ACTUAL                   â”‚
â”‚ Moai de Rapa Nui ðŸ—¿             â”‚
â”‚ Estatuas monolÃ­ticas...         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [â† Anterior] [Siguiente â†’]      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ TODAS LAS ESCENAS (6)           â”‚
â”‚ ðŸŽ¬ IntroducciÃ³n                 â”‚
â”‚ ðŸ—¿ Moai de Rapa Nui âœ“           â”‚
â”‚ ðŸ¦ Esfinge de Giza              â”‚
â”‚ âš”ï¸ Guerrero Antiguo             â”‚
â”‚ ðŸŒ ComparaciÃ³n Cultural         â”‚
â”‚ ðŸŽ‰ Final del Tour               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Atajos
- Click en escena â†’ Cargar inmediatamente
- Botones Anterior/Siguiente â†’ NavegaciÃ³n secuencial
- Barra de progreso â†’ Ver carga en tiempo real

---

## ðŸ”Š Control de Audio

### BotÃ³n Flotante
- **UbicaciÃ³n**: Esquina superior derecha
- **Icono**: ðŸ”Š (activo) / ðŸ”‡ (silenciado)
- **Color**: Azul (activo) / Rojo (silenciado)
- **AcciÃ³n**: Click para abrir/cerrar panel

### Panel de Control
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ðŸŽµ Control de Audio             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [ðŸ”Š Silenciar Todo]             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ðŸŽšï¸ Volumen General      [80%]  â”‚
â”‚ â–“â–“â–“â–“â–“â–“â–“â–“â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ðŸŽµ MÃºsica de Fondo      [70%]  â”‚
â”‚ â–“â–“â–“â–“â–“â–“â–“â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ðŸŽ™ï¸ NarraciÃ³n           [100%]  â”‚
â”‚ â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ðŸ”” Efectos de Sonido    [80%]  â”‚
â”‚ â–“â–“â–“â–“â–“â–“â–“â–“â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Controles
- **Volumen General**: Afecta todo el audio
- **MÃºsica**: Solo mÃºsica de fondo
- **NarraciÃ³n**: Solo voice-over
- **Efectos**: Solo sonidos de UI/eventos
- **Silenciar Todo**: Mute instantÃ¡neo

---

## ðŸŽ¯ Escenas Disponibles

### 1. ðŸŽ¬ IntroducciÃ³n
- **DuraciÃ³n**: 5 segundos
- **Modelos**: Ninguno
- **CÃ¡mara**: Vista panorÃ¡mica
- **Auto-play**: SÃ­ â†’ Pasa a Moai

### 2. ðŸ—¿ Moai de Rapa Nui
- **DuraciÃ³n**: 15 segundos
- **Modelos**: moai.glb
- **CÃ¡mara**: Vista frontal cercana
- **Audio**: Olas del ocÃ©ano
- **NarraciÃ³n**: Historia de Rapa Nui

### 3. ðŸ¦ Esfinge de Giza
- **DuraciÃ³n**: 15 segundos
- **Modelos**: sphinxWithBase.glb
- **CÃ¡mara**: Vista lateral elevada
- **Audio**: Viento del desierto
- **NarraciÃ³n**: Historia de Egipto

### 4. âš”ï¸ Guerrero Antiguo
- **DuraciÃ³n**: 12 segundos
- **Modelos**: warrior.glb (con animaciÃ³n)
- **CÃ¡mara**: Vista media
- **Audio**: Ambiente de batalla
- **AnimaciÃ³n**: Idle loop

### 5. ðŸŒ ComparaciÃ³n Cultural
- **DuraciÃ³n**: 20 segundos
- **Modelos**: moai.glb + sphinx.glb (lado a lado)
- **CÃ¡mara**: Vista amplia frontal
- **IluminaciÃ³n**: Neutral para comparaciÃ³n

### 6. ðŸŽ‰ Final del Tour
- **DuraciÃ³n**: 5 segundos
- **Modelos**: Ninguno
- **CÃ¡mara**: Vista alejada
- **IluminaciÃ³n**: Atardecer (hora 18)

---

## ðŸ’» API ProgramÃ¡tica

### SceneSystem

```typescript
// Obtener instancia
const sceneSystem = useSceneStore(state => state.sceneSystem)

// Cargar escena
await sceneSystem.loadScene('moai-scene', (progress) => {
  console.log(`${progress}%`)
})

// Navegar
sceneSystem.nextScene()
sceneSystem.previousScene()

// Consultar
const current = sceneSystem.getCurrentScene()
const all = sceneSystem.getAllScenes()
const isTransitioning = sceneSystem.isInTransition()
```

### AudioSystem

```typescript
// Obtener instancia
const audioSystem = useSceneStore(state => state.audioSystem)

// Cargar track
await audioSystem.loadTrack({
  id: 'music-ocean',
  url: '/audio/ocean.mp3',
  volume: 0.7,
  loop: true,
  type: 'music'
})

// Reproducir
audioSystem.play('music-ocean')
audioSystem.pause('music-ocean')
audioSystem.stop('music-ocean')

// Efectos
audioSystem.fadeIn('music-ocean', 2000)
audioSystem.fadeOut('music-ocean', 2000)
audioSystem.crossfade('music-ocean', 'music-desert', 2000)

// Volumen
audioSystem.setMasterVolume(0.8)
audioSystem.setMusicVolume(0.6)
audioSystem.toggleMute()
```

---

## ðŸŽ¨ PersonalizaciÃ³n

### Crear Escena Personalizada

```typescript
// En viewer3d/data/scenes.ts
import * as THREE from 'three'

const miEscena: SceneDefinition = {
  id: 'mi-escena',
  name: 'Mi Escena Personalizada',
  description: 'Una escena Ãºnica',
  
  models: [
    {
      id: 'modelo1',
      path: '/mi-modelo.glb',
      position: new THREE.Vector3(0, 0, 0),
      rotation: new THREE.Euler(0, Math.PI / 2, 0),
      scale: 1.5
    }
  ],
  
  camera: {
    position: new THREE.Vector3(10, 5, 10),
    target: new THREE.Vector3(0, 1, 0),
    fov: 45,
    transition: {
      duration: 3000,
      easing: 'easeInOut'
    }
  },
  
  lighting: {
    timeOfDay: 14, // 2 PM
    ambient: { 
      intensity: 0.6, 
      color: '#ffffff' 
    },
    directional: { 
      intensity: 1.5, 
      position: [10, 15, 5] 
    }
  },
  
  audio: {
    background: '/audio/mi-musica.mp3',
    narration: '/audio/mi-narracion.mp3',
    volume: 0.8,
    loop: true
  },
  
  duration: 10000, // 10 segundos
  autoPlay: false,
  
  onEnter: () => {
    console.log('ðŸŽ¬ Entrando a mi escena')
  },
  
  onExit: () => {
    console.log('ðŸ‘‹ Saliendo de mi escena')
  }
}

// Agregar al array
export const ARCHAEOLOGICAL_SCENES = [
  // ... escenas existentes
  miEscena
]
```

### Agregar Audio Personalizado

```typescript
// 1. Colocar archivo en /public/audio/
// Ejemplo: /public/audio/mi-musica.mp3

// 2. Cargar en cÃ³digo
const audioSystem = new AudioSystem()

await audioSystem.loadTrack({
  id: 'custom-music',
  url: '/audio/mi-musica.mp3',
  volume: 0.7,
  loop: true,
  type: 'music'
})

// 3. Reproducir
audioSystem.fadeIn('custom-music', 2000)
```

---

## ðŸ”§ Troubleshooting

### Escena no carga
```typescript
// Verificar en consola
sceneSystem.getScene('scene-id')
// Si retorna undefined, la escena no estÃ¡ registrada

// Verificar registro
sceneSystem.getAllScenes()
// Debe incluir tu escena
```

### Audio no reproduce
```typescript
// Verificar carga
audioSystem.getAllTracks()
// Debe incluir tu track

// Verificar volumen
audioSystem.getMasterVolume() // > 0
audioSystem.isMutedState() // false

// Verificar reproducciÃ³n
audioSystem.isPlaying('track-id') // true
```

### TransiciÃ³n bloqueada
```typescript
// Verificar estado
sceneSystem.isInTransition() // false para permitir cambio

// Si estÃ¡ bloqueado, esperar o forzar
// (no recomendado, pero posible)
```

---

## ðŸ“Š Performance Tips

### Optimizar Carga
- Usar modelos GLB comprimidos
- Limitar polÃ­gonos a <100k por modelo
- Usar texturas comprimidas (JPG/WebP)

### Optimizar Audio
- Usar MP3 comprimido (128-192 kbps)
- Limitar duraciÃ³n de loops
- Precargar audio crÃ­tico

### Optimizar Transiciones
- DuraciÃ³n Ã³ptima: 2000-3000ms
- Evitar transiciones muy rÃ¡pidas (<1000ms)
- Usar easing apropiado

---

## ðŸŽ“ Ejemplos de Uso

### Tour AutomÃ¡tico
```typescript
// Configurar auto-play en todas las escenas
ARCHAEOLOGICAL_SCENES.forEach(scene => {
  scene.autoPlay = true
  scene.duration = 10000 // 10 segundos cada una
})

// Iniciar desde intro
sceneSystem.loadScene('intro')
// Se reproducirÃ¡ automÃ¡ticamente
```

### Modo ExploraciÃ³n Libre
```typescript
// Desactivar auto-play
ARCHAEOLOGICAL_SCENES.forEach(scene => {
  scene.autoPlay = false
})

// Usuario navega manualmente
// con SceneNavigator UI
```

### Sincronizar Audio con Escena
```typescript
const scene: SceneDefinition = {
  // ... config
  onEnter: () => {
    audioSystem.fadeIn('music-ocean', 2000)
  },
  onExit: () => {
    audioSystem.fadeOut('music-ocean', 1000)
  }
}
```

---

## ðŸš€ PrÃ³ximos Pasos

### Agregar Assets
1. Crear `/public/audio/` directory
2. Agregar archivos MP3
3. Actualizar rutas en `scenes.ts`

### Texto 3D (Opcional)
1. Instalar fuentes typeface.json
2. Crear componente Text3DLabel
3. Agregar a escenas

### Narrativa (Opcional)
1. Crear NarrativeSystem
2. Definir capÃ­tulos
3. Implementar ProgressTracker

---

**Â¿Preguntas?** Consulta `FASE2_PROGRESO.md` para detalles tÃ©cnicos completos.

**Fecha**: 12 de Febrero, 2026  
**Estado**: âœ… Listo para usar
